import{_ as v}from"./PageContainer-CxS_J6Zm.js";import{ad as g,r as U,I as E,o as t,j as n,k as s,U as k,J as r,g as h,ab as w,bH as A,an as l,E as B}from"./index-DVnxsj79.js";import{_ as x,E as y}from"./_plugin-vue_export-helper-BrXyS60y.js";import{E as S}from"./el-progress-Zm6AphxT.js";import"./el-message-nz64TIUu.js";import"./isEqual-VtTRdaQr.js";const b={class:"user-avatar"},C=["src"],I={__name:"UserAvatar",setup(N){const c=g(),a=U(c.user.user_pic),_=e=>{const o=new FileReader;o.readAsDataURL(e.raw),o.onload=()=>{a.value=o.result}},p=async()=>{const e=await A(a.value);console.log(e),e.data.code===0?(await c.getUser(),l.success("头像更新成功")):l.error("头像更新失败")};return(e,o)=>{const u=E("Plus"),i=B,d=S,m=y,f=v;return t(),n(f,{title:"更换头像"},{"page-content":s(()=>[k("div",b,[r(d,{ref:"uploadRef","auto-upload":!1,class:"avatar-uploader","show-file-list":!1,"on-change":_},{default:s(()=>[a.value?(t(),h("img",{key:0,src:a.value,class:"avatar"},null,8,C)):(t(),n(i,{key:1,class:"avatar-uploader-icon"},{default:s(()=>[r(u)]),_:1}))]),_:1},512),r(m,{onClick:p,type:"success",icon:e.Upload,size:"large"},{default:s(()=>[w("确认上传")]),_:1},8,["icon"])])]),_:1})}}},D=x(I,[["__scopeId","data-v-d359230c"]]);export{D as default};
